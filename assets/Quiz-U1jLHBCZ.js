import{r as o,d as y,j as e}from"./index-Bx7_Jaz-.js";function m(s){const n=s.slice();for(let a=n.length-1;a>0;a-=1){const x=Math.floor(Math.random()*(a+1));[n[a],n[x]]=[n[x],n[a]]}return n}function P(){try{const s=localStorage.getItem("progress");return s?JSON.parse(s):{}}catch{return{}}}function E(s){localStorage.setItem("progress",JSON.stringify(s))}function Q(){const s=o.useMemo(()=>m(y).slice(0,20),[]),[n,a]=o.useState(0),[x,N]=o.useState(0),[d,f]=o.useState(!1),[p,g]=o.useState(null),[h,S]=o.useState(P()),[l,v]=o.useState("capital");o.useEffect(()=>{v(Math.random()>.5?"capital":"country")},[n]);const i=s[n],c=l==="capital"?i.capital:i.country,w=o.useMemo(()=>{const t=m(y.filter(r=>l==="capital"?r.capital!==c:r.country!==c)).slice(0,3),u=[c,...t.map(r=>l==="capital"?r.capital:r.country)];return m(u)},[i,l]);function C(t){if(d)return;g(t);const u=t===c;f(!0),u&&N(A=>A+1);const r=i.country,b=h[r]||{attempts:0,correct:0},M={attempts:b.attempts+1,correct:b.correct+(u?1:0)},j={...h,[r]:M};S(j),E(j)}function k(){f(!1),g(null),a(t=>t+1)}function I(){window.location.reload()}return n>=s.length?e.jsxs("div",{className:"w-full max-w-2xl glass rounded-2xl p-8 text-center fade-in",children:[e.jsx("div",{className:"text-3xl font-semibold text-neon-purple",children:"Final Score"}),e.jsxs("div",{className:"mt-4 text-2xl",children:[x," / ",s.length]}),e.jsx("button",{onClick:I,className:"mt-6 px-4 py-2 rounded-lg bg-gradient-to-r from-neon-blue to-neon-purple text-black font-semibold hover:scale-105 active:scale-95 transition-transform focus:outline-none focus:ring-2 focus:ring-neon-blue","aria-label":"Retry",children:"Retry"})]}):e.jsxs("div",{className:"w-full max-w-2xl glass rounded-2xl p-8 fade-in",children:[e.jsx("div",{className:"text-sm text-slate-300 mb-2",children:l==="capital"?"Select the correct capital for:":"Select the correct country for:"}),e.jsx("div",{className:"text-2xl md:text-3xl font-semibold text-neon-green",children:l==="capital"?i.country:i.capital}),e.jsx("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-2 gap-3",children:w.map(t=>{const u=d&&t===c,r=d&&t===p&&t!==c;return e.jsx("button",{onClick:()=>C(t),className:["px-4 py-3 rounded-xl text-left glass transition transform hover:scale-[1.01] focus:outline-none focus:ring-2",u?"bg-green-500/20 ring-green-400":"",r?"bg-red-500/20 ring-red-400":""].join(" "),"aria-label":`Option ${t}`,children:t},t)})}),d&&e.jsx("div",{className:"mt-4 text-sm",children:p===c?e.jsx("span",{className:"text-green-400",children:"Correct!"}):e.jsxs("span",{className:"text-red-400",children:["Incorrect, the answer is ",c,"."]})}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"text-slate-400",children:["Question ",n+1," / ",s.length]}),e.jsx("button",{onClick:k,disabled:!d,className:"px-4 py-2 rounded-lg bg-gradient-to-r from-neon-blue to-neon-purple text-black font-semibold disabled:opacity-50 focus:outline-none focus:ring-2 focus:ring-neon-purple","aria-label":"Next question",children:"Next"})]})]})}export{Q as default};
