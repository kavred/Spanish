import{L as l,x as j,B as e}from"./index-BxxWi0GK.js";function m(n){const s=n.slice();for(let c=s.length-1;c>0;c-=1){const x=Math.floor(Math.random()*(c+1));[s[c],s[x]]=[s[x],s[c]]}return s}function R(){try{const n=localStorage.getItem("progress");return n?JSON.parse(n):{}}catch{return{}}}function B(n){localStorage.setItem("progress",JSON.stringify(n))}function J(){const n=l.useMemo(()=>m(j).slice(0,20),[]),[s,c]=l.useState(0),[x,y]=l.useState(0),[d,f]=l.useState(!1),[p,g]=l.useState(null),[h,v]=l.useState(R()),[o,S]=l.useState("capital");l.useEffect(()=>{S(Math.random()>.5?"capital":"country")},[s]);const i=n[s],r=o==="capital"?i.capital:i.country,w=l.useMemo(()=>{const t=m(j.filter(a=>o==="capital"?a.capital!==r:a.country!==r)).slice(0,3),u=[r,...t.map(a=>o==="capital"?a.capital:a.country)];return m(u)},[i,o]);function k(t){if(d)return;g(t);const u=t===r;f(!0),u&&y(O=>O+1);const a=i.country,b=h[a]||{attempts:0,correct:0},I={attempts:b.attempts+1,correct:b.correct+(u?1:0)},N={...h,[a]:I};v(N),B(N)}function M(){f(!1),g(null),c(t=>t+1)}function C(){window.location.reload()}return s>=n.length?e.jsxs("div",{className:"w-full max-w-2xl glass rounded-2xl p-8 text-center fade-in",children:[e.jsx("div",{className:"text-3xl font-semibold text-neon-purple",children:"Final Score"}),e.jsxs("div",{className:"mt-4 text-2xl",children:[x," / ",n.length]}),e.jsx("button",{onClick:C,className:"mt-6 px-4 py-2 rounded-lg bg-gradient-to-r from-neon-blue to-neon-purple text-black font-semibold hover:scale-105 active:scale-95 transition-transform focus:outline-none focus:ring-2 focus:ring-neon-blue","aria-label":"Retry",children:"Retry"})]}):e.jsxs("div",{className:"w-full max-w-2xl glass rounded-2xl p-8 fade-in",children:[e.jsx("div",{className:"text-sm text-slate-300 mb-2",children:o==="capital"?"Select the correct capital for:":"Select the correct country for:"}),e.jsx("div",{className:"text-2xl md:text-3xl font-semibold text-neon-green",children:o==="capital"?i.country:i.capital}),e.jsx("div",{className:"mt-6 grid grid-cols-1 sm:grid-cols-2 gap-3",children:w.map(t=>{const u=d&&t===r,a=d&&t===p&&t!==r;return e.jsx("button",{onClick:()=>k(t),className:["px-4 py-3 rounded-xl text-left glass transition transform hover:scale-[1.01] focus:outline-none focus:ring-2",u?"bg-green-500/20 ring-green-400":"",a?"bg-red-500/20 ring-red-400":""].join(" "),"aria-label":`Option ${t}`,children:t},t)})}),d&&e.jsx("div",{className:"mt-4 text-sm",children:p===r?e.jsx("span",{className:"text-green-400",children:"Correct!"}):e.jsxs("span",{className:"text-red-400",children:["Incorrect, the answer is ",r,"."]})}),e.jsxs("div",{className:"mt-6 flex items-center justify-between",children:[e.jsxs("div",{className:"text-slate-400",children:["Question ",s+1," / ",n.length]}),e.jsx("button",{onClick:M,disabled:!d,className:"px-4 py-2 rounded-lg bg-gradient-to-r from-neon-blue to-neon-purple text-black font-semibold disabled:opacity-50 focus:outline-none focus:ring-2 focus:ring-neon-purple","aria-label":"Next question",children:"Next"})]})]})}export{J as default};
